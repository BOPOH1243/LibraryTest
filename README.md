# Библиотека книг

Это консольное приложение для управления библиотекой книг. Программа позволяет добавлять, удалять, искать и отображать книги в библиотеке, а также изменять их статус.

## Описание функционала

### 1. **Класс `Book`**

Класс, представляющий книгу. Каждая книга имеет следующие атрибуты:
- `id` (int): Уникальный идентификатор книги.
- `title` (str): Название книги.
- `author` (str): Автор книги.
- `year` (int): Год издания книги.
- `status` (str): Статус книги. Возможные значения: `"в наличии"`, `"выдана"`. По умолчанию: `"в наличии"`.

**Методы класса `Book`:**
- `to_dict()`: Преобразует объект книги в словарь.
- `from_dict(data: Dict)`: Создает объект книги из словаря.

### 2. **Класс `Library`**

Класс для управления библиотекой книг. Хранит книги в файле в формате JSON.

**Атрибуты:**
- `filename` (str): Имя файла для хранения данных о книгах.
- `books` (List[Book]): Список книг в библиотеке.

**Методы класса `Library`:**
- `load_books()`: Загружает книги из файла.
- `save_books()`: Сохраняет текущие книги в файл.
- `add_book(title: str, author: str, year: int)`: Добавляет новую книгу в библиотеку.
- `delete_book(book_id: int) -> bool`: Удаляет книгу по ID.
- `find_books(title: Optional[str] = None, author: Optional[str] = None, year: Optional[int] = None) -> List[Book]`: Ищет книги по названию, автору или году.
- `change_status(book_id: int, status: str) -> bool`: Изменяет статус книги.
- `get_all_books() -> List[Book]`: Возвращает список всех книг.

### 3. **Файл `main.py`**

Файл содержит тестовый интерфейс командной строки для работы с библиотекой.

#### Функции:

- **`add_book_action(library: Library)`**: Запрашивает у пользователя название книги, автора и год издания, добавляет книгу в библиотеку.
  - В случае некорректного ввода года или статуса, выводится сообщение об ошибке.

- **`delete_book_action(library: Library)`**: Запрашивает у пользователя ID книги и удаляет книгу с указанным ID.
  - В случае, если книга с таким ID не найдена, выводится сообщение об ошибке.

- **`find_book_action(library: Library)`**: Позволяет искать книги по названию, автору или году.
  - Выводит список найденных книг.

- **`change_status_action(library: Library)`**: Изменяет статус книги.
  - Вводит ID книги и новый статус ("в наличии" или "выдана").

- **`display_books_action(library: Library)`**: Выводит список всех книг в библиотеке.

#### Пример взаимодействия:

1. **Добавление книги:**
    ```
    Введите название книги: Война и мир
    Введите автора книги: Лев Толстой
    Введите год издания книги: 1869
    Книга успешно добавлена!
    ```

2. **Изменение статуса книги:**
    ```
    Введите ID книги: 1
    Введите новый статус ("в наличии" или "выдана"): выдана
    Статус книги успешно изменен!
    ```

3. **Поиск книги:**
    ```
    Введите название книги: Война
    Найдено 1 книга:
    ID: 1, Название: Война и мир, Автор: Лев Толстой, Год: 1869, Статус: выдана
    ```

4. **Удаление книги:**
    ```
    Введите ID книги: 1
    Книга успешно удалена!
    ```

5. **Отображение всех книг:**
    ```
    ID: 1, Название: Война и мир, Автор: Лев Толстой, Год: 1869, Статус: в наличии
    ID: 2, Название: Преступление и наказание, Автор: Фёдор Достоевский, Год: 1866, Статус: выдана
    ```

---

### Тестирование и обработка ошибок

- В случае некорректного ввода данных (например, при вводе нечислового значения для года или ID книги) будет выведено сообщение об ошибке.
- Для изменения статуса книги можно использовать только два допустимых значения: `"в наличии"` или `"выдана"`. В случае ввода некорректного статуса будет выброшено исключение с ошибкой.
- Все данные о книгах сохраняются в файл JSON, и любые изменения в библиотеке автоматически сохраняются в файл.
